% ansible-playbook -v -b -c paramiko docker_deploy_portainer.yml

PLAY [Deploy Portainer CE container on Swarm cluster] *********************************************************************************************************************************

TASK [Gathering Facts] ****************************************************************************************************************************************************************
[WARNING]: Platform linux on host clusterpi01 is using the discovered Python interpreter at /usr/bin/python3.9, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.15/reference_appendices/interpreter_discovery.html for more information.
ok: [clusterpi01]

TASK [Install Docker Compose] *********************************************************************************************************************************************************
changed: [clusterpi01] => {"changed": true, "cmd": ["curl", "-L", "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)", "-o", "/usr/local/bin/docker-compose"], "delta": "0:00:00.228316", "end": "2023-06-15 16:47:31.053029", "msg": "", "rc": 0, "start": "2023-06-15 16:47:30.824713", "stderr": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100  1440    0  1440    0     0  11076      0 --:--:-- --:--:-- --:--:-- 11162", "stderr_lines": ["  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "100  1440    0  1440    0     0  11076      0 --:--:-- --:--:-- --:--:-- 11162"], "stdout": "", "stdout_lines": []}

TASK [Set execute permissions for Docker Compose] *************************************************************************************************************************************
changed: [clusterpi01] => {"changed": true, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/usr/local/bin/docker-compose", "size": 1440, "state": "file", "uid": 0}

TASK [Create Portainer data directory] ************************************************************************************************************************************************
changed: [clusterpi01] => {"changed": true, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/portainer", "size": 4096, "state": "directory", "uid": 0}

TASK [Start Portainer container] ******************************************************************************************************************************************************
changed: [clusterpi01] => {"changed": true, "cmd": ["docker", "run", "-d", "-p", "9000:9000", "--restart", "always", "-v", "/var/run/docker.sock:/var/run/docker.sock", "-v", "/opt/portainer:/data", "--name", "portainer", "portainer/portainer-ce"], "delta": "0:00:56.738846", "end": "2023-06-15 16:48:32.863943", "msg": "", "rc": 0, "start": "2023-06-15 16:47:36.125097", "stderr": "Unable to find image 'portainer/portainer-ce:latest' locally\nlatest: Pulling from portainer/portainer-ce\n772227786281: Pulling fs layer\n96fd13befc87: Pulling fs layer\n23f2184d3136: Pulling fs layer\n96063559028e: Pulling fs layer\n4c3b3bc85ff4: Pulling fs layer\n875756a49192: Pulling fs layer\nf5352f1c2294: Pulling fs layer\nc1d923da449f: Pulling fs layer\nd6e9b938f281: Pulling fs layer\nd7102916657d: Pulling fs layer\n4f4fb700ef54: Pulling fs layer\n4c3b3bc85ff4: Waiting\n96063559028e: Waiting\n875756a49192: Waiting\nf5352f1c2294: Waiting\nd6e9b938f281: Waiting\nc1d923da449f: Waiting\n96fd13befc87: Verifying Checksum\n96fd13befc87: Download complete\n772227786281: Download complete\n772227786281: Pull complete\n96fd13befc87: Pull complete\n23f2184d3136: Verifying Checksum\n23f2184d3136: Download complete\n4c3b3bc85ff4: Verifying Checksum\n4c3b3bc85ff4: Download complete\n96063559028e: Verifying Checksum\n96063559028e: Download complete\nf5352f1c2294: Verifying Checksum\nf5352f1c2294: Download complete\nd6e9b938f281: Verifying Checksum\nd6e9b938f281: Download complete\nd7102916657d: Verifying Checksum\nd7102916657d: Download complete\n875756a49192: Verifying Checksum\n875756a49192: Download complete\n4f4fb700ef54: Verifying Checksum\n4f4fb700ef54: Download complete\nc1d923da449f: Verifying Checksum\nc1d923da449f: Download complete\n23f2184d3136: Pull complete\n96063559028e: Pull complete\n4c3b3bc85ff4: Pull complete\n875756a49192: Pull complete\nf5352f1c2294: Pull complete\nc1d923da449f: Pull complete\nd6e9b938f281: Pull complete\nd7102916657d: Pull complete\n4f4fb700ef54: Pull complete\nDigest: sha256:d0e89bf59a3e8bb479226579673934a6338e4ffbe6946d4a55e12af632727c03\nStatus: Downloaded newer image for portainer/portainer-ce:latest", "stderr_lines": ["Unable to find image 'portainer/portainer-ce:latest' locally", "latest: Pulling from portainer/portainer-ce", "772227786281: Pulling fs layer", "96fd13befc87: Pulling fs layer", "23f2184d3136: Pulling fs layer", "96063559028e: Pulling fs layer", "4c3b3bc85ff4: Pulling fs layer", "875756a49192: Pulling fs layer", "f5352f1c2294: Pulling fs layer", "c1d923da449f: Pulling fs layer", "d6e9b938f281: Pulling fs layer", "d7102916657d: Pulling fs layer", "4f4fb700ef54: Pulling fs layer", "4c3b3bc85ff4: Waiting", "96063559028e: Waiting", "875756a49192: Waiting", "f5352f1c2294: Waiting", "d6e9b938f281: Waiting", "c1d923da449f: Waiting", "96fd13befc87: Verifying Checksum", "96fd13befc87: Download complete", "772227786281: Download complete", "772227786281: Pull complete", "96fd13befc87: Pull complete", "23f2184d3136: Verifying Checksum", "23f2184d3136: Download complete", "4c3b3bc85ff4: Verifying Checksum", "4c3b3bc85ff4: Download complete", "96063559028e: Verifying Checksum", "96063559028e: Download complete", "f5352f1c2294: Verifying Checksum", "f5352f1c2294: Download complete", "d6e9b938f281: Verifying Checksum", "d6e9b938f281: Download complete", "d7102916657d: Verifying Checksum", "d7102916657d: Download complete", "875756a49192: Verifying Checksum", "875756a49192: Download complete", "4f4fb700ef54: Verifying Checksum", "4f4fb700ef54: Download complete", "c1d923da449f: Verifying Checksum", "c1d923da449f: Download complete", "23f2184d3136: Pull complete", "96063559028e: Pull complete", "4c3b3bc85ff4: Pull complete", "875756a49192: Pull complete", "f5352f1c2294: Pull complete", "c1d923da449f: Pull complete", "d6e9b938f281: Pull complete", "d7102916657d: Pull complete", "4f4fb700ef54: Pull complete", "Digest: sha256:d0e89bf59a3e8bb479226579673934a6338e4ffbe6946d4a55e12af632727c03", "Status: Downloaded newer image for portainer/portainer-ce:latest"], "stdout": "bacfdedf76730c6e79e5df57c158a1452572786da4eed42efc5984b2136bfdf5", "stdout_lines": ["bacfdedf76730c6e79e5df57c158a1452572786da4eed42efc5984b2136bfdf5"]}

PLAY RECAP ****************************************************************************************************************************************************************************
clusterpi01                : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   